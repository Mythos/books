!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).flasher=t()}(this,(function(){"use strict";function e(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?l((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function o(e,t,n){return e.concat(t).map((function(e){return r(e,n)}))}function i(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function a(e,t){try{return t in e}catch(e){return!1}}function s(e,t,n){var o={};return n.isMergeableObject(e)&&i(e).forEach((function(t){o[t]=r(e[t],n)})),i(t).forEach((function(i){(function(e,t){return a(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(a(e,i)&&n.isMergeableObject(t[i])?o[i]=function(e,t){if(!t.customMerge)return l;var n=t.customMerge(e);return"function"==typeof n?n:l}(i,n)(e[i],t[i],n):o[i]=r(t[i],n))})),o}function l(e,n,i){(i=i||{}).arrayMerge=i.arrayMerge||o,i.isMergeableObject=i.isMergeableObject||t,i.cloneUnlessOtherwiseSpecified=r;var a=Array.isArray(n);return a===Array.isArray(e)?a?i.arrayMerge(e,n,i):s(e,n,i):r(n,i)}l.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return l(e,n,t)}),{})};var f=l,c=function(){function e(e){this.options={timeout:5e3,fps:30,position:"top-right",direction:"top",style:{}},this.viewFactory=e}return e.prototype.success=function(e,t,n){this.flash("success",e,t,n)},e.prototype.info=function(e,t,n){this.flash("info",e,t,n)},e.prototype.warning=function(e,t,n){this.flash("warning",e,t,n)},e.prototype.error=function(e,t,n){this.flash("error",e,t,n)},e.prototype.flash=function(e,t,n,r){var o=this.createNotification(e,t,n,r);this.renderOptions({}),this.render({notification:o})},e.prototype.createNotification=function(e,t,n,r){if("object"==typeof e?(e=(r=e).type,t=r.message,n=r.title):"object"==typeof t?(t=(r=t).message,n=r.title):"object"==typeof n&&(n=(r=n).title),void 0===t)throw new Error("message option is required");return{type:e||"info",message:t,title:n,options:r}},e.prototype.render=function(e){var t=e.notification.options||{},n=Array.isArray(t)?this.options:f(this.options,t),r=this.createContainer(n);this.addToContainer(r,e,n)},e.prototype.renderOptions=function(e){this.options=f(this.options,e)},e.prototype.createContainer=function(e){var t='.fl-main-container[data-position="'.concat(e.position,'"]'),n=document.querySelector(t);return n||((n=document.createElement("div")).classList.add("fl-main-container"),n.dataset.position=e.position,Object.keys(e.style).forEach((function(t){null==n||n.style.setProperty(t,e.style[t])})),document.body.append(n),n)},e.prototype.addToContainer=function(e,t,n){var r=this.stringToHTML(t.template||this.viewFactory.render(t));this.appendNotification(e,r,n.direction),this.renderProgressBar(r,n),this.handleClick(r)},e.prototype.appendNotification=function(e,t,n){"bottom"===n?e.append(t):e.prepend(t),setTimeout((function(){t.classList.add("fl-show")}),100)},e.prototype.removeNotification=function(e){var t=e.parentElement;e.classList.remove("fl-show"),e.addEventListener("transitionend",(function(){e.remove(),t.hasChildNodes()||t.remove()}))},e.prototype.handleClick=function(e){var t=this;e.addEventListener("click",(function(){return t.removeNotification(e)}))},e.prototype.renderProgressBar=function(e,t){var n=this;if(t.timeout&&!(t.timeout<=0)){var r=document.createElement("div");r.classList.add("fl-progress");var o=e.querySelector(".fl-progress-bar");o&&o.append(r);var i=1e3/t.fps,a=0,s=function(){var o=100*(1-i*((a+=1)/t.timeout));r.style.width="".concat(o,"%"),o<=0&&(clearInterval(l),n.removeNotification(e))},l=window.setInterval(s,i);e.addEventListener("mouseout",(function(){return l=window.setInterval(s,i)})),e.addEventListener("mouseover",(function(){return clearInterval(l)}))}},e.prototype.stringToHTML=function(e){var t=function(){if(!DOMParser)return!1;var e=new DOMParser;try{e.parseFromString("x","text/html")}catch(e){return!1}return!0}();if(t)return(new DOMParser).parseFromString(e,"text/html").body.firstChild;var n=document.createElement("div");return n.innerHTML=e,n.firstElementChild},e}(),p=function(){function t(){this.defaultHandler="theme.flasher",this.factories=new Map,this.themes=new Map}return t.prototype.success=function(e,t,n){this.flash("success",e,t,n)},t.prototype.info=function(e,t,n){this.flash("info",e,t,n)},t.prototype.warning=function(e,t,n){this.flash("warning",e,t,n)},t.prototype.error=function(e,t,n){this.flash("error",e,t,n)},t.prototype.flash=function(e,t,n,r){var o=this.createNotification(e,t,n,r),i=this.create(this.defaultHandler);i.renderOptions({}),i.render({notification:o})},t.prototype.createNotification=function(e,t,n,r){if("object"==typeof e?(e=(r=e).type,t=r.message,n=r.title):"object"==typeof t?(t=(r=t).message,n=r.title):"object"==typeof n&&(n=(r=n).title),void 0===t)throw new Error("message option is required");return{type:e||"info",message:t,title:n,options:r}},t.prototype.create=function(e){e=this.resolveHandler(e),this.resolveThemeHandler(e);var t=this.factories.get(e);if(!t)throw new Error('Unable to resolve "'.concat(e,'" notification factory, did you forget to register it?'));return t},t.prototype.renderOptions=function(e){var t=this;Object.entries(e).forEach((function(e){var n=e[0],r=e[1];t.create(n).renderOptions(r)}))},t.prototype.render=function(e){var t=this;e=this.resolveResponse(e),this.addStyles(e.styles,(function(){t.addScripts(e.scripts,(function(){t.renderOptions(e.options),t.renderEnvelopes(e.envelopes,e.context)}))}))},t.prototype.addFactory=function(e,t){this.factories.set(e,t)},t.prototype.addTheme=function(e,t){this.themes.set(e,t)},t.prototype.using=function(e){return this.defaultHandler=e,this},t.prototype.addStyles=function(e,t){var n=this;if(0!==e.length)if(null===document.querySelector('link[href="'.concat(e[0],'"]'))){var r=document.createElement("link");r.setAttribute("href",e[0]),r.setAttribute("type","text/css"),r.setAttribute("rel","stylesheet"),r.onload=function(){return n.addStyles(e.slice(1),t)},document.head.appendChild(r)}else this.addStyles(e.slice(1),t);else"function"==typeof t&&t()},t.prototype.addScripts=function(e,t){var n=this;if(0!==e.length)if(null===document.querySelector('script[src="'.concat(e[0],'"]'))){var r=document.createElement("script");r.setAttribute("src",e[0]),r.setAttribute("type","text/javascript"),r.onload=function(){return n.addScripts(e.slice(1),t)},document.body.appendChild(r)}else this.addScripts(e.slice(1),t);else"function"==typeof t&&t()},t.prototype.renderEnvelopes=function(e,t){var n=this,r=new Map;e.forEach((function(e){e.context=Object.assign({},e.context||{},t),e.handler=n.resolveHandler(e.handler);var o=n.create(e.handler);n.isQueueable(o)?(r.get(e.handler)||o.resetQueue(),o.addEnvelope(e),r.set(e.handler,o)):o.render(e)})),r.forEach((function(e){return e.renderQueue()}))},t.prototype.isQueueable=function(e){return"function"==typeof e.addEnvelope&&"function"==typeof e.renderQueue},t.prototype.resolveResponse=function(e){var t=this;return e.envelopes=e.envelopes||[],e.options=e.options||{},e.scripts=e.scripts||[],e.styles=e.styles||[],e.context=e.context||{},Object.entries(e.options).forEach((function(n){var r=n[0],o=n[1];e.options[r]=t.parseOptions(o)})),e.envelopes.forEach((function(n){n.handler=t.resolveHandler(n.handler),n.notification.options=t.parseOptions(n.notification.options||{}),t.pushStyles(e,n.handler)})),e},t.prototype.parseOptions=function(e){var t=this;return Object.entries(e).forEach((function(n){var r=n[0],o=n[1];e[r]=t.parseFunction(o)})),e},t.prototype.parseFunction=function(t){var n,r;if("string"!=typeof t)return t;var o=t.match(/^function(?:.+)?(?:\s+)?\((.+)?\)(?:\s+|\n+)?{(?:\s+|\n+)?((?:.|\n)+)}$/m);if(!o)return t;var i=null!==(r=null===(n=o[1])||void 0===n?void 0:n.split(",").map((function(e){return e.trim()})))&&void 0!==r?r:[],a=o[2];return new(Function.bind.apply(Function,e(e([void 0],i,!1),[a],!1)))},t.prototype.pushStyles=function(e,t){var n;t=t.replace("theme.","");var r=(null===(n=this.themes.get(t))||void 0===n?void 0:n.styles)||[];e.styles=e.styles.concat(r).filter((function(e,t,n){return n.indexOf(e)===t}))},t.prototype.resolveHandler=function(e){return e=e||this.defaultHandler,["flasher","theme","template"].includes(e)&&(e="theme.flasher"),e.replace("template.","theme.")},t.prototype.resolveThemeHandler=function(e){if(0===e.indexOf("theme.")){var t=this.themes.get(e.replace("theme.",""));t&&this.addFactory(e,new c(t))}},t}(),d=[],u=[];!function(e,t){if(e&&"undefined"!=typeof document){var n,r=!0===t.prepend?"prepend":"append",o=!0===t.singleTag,i="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(o){var a=d.indexOf(i);-1===a&&(a=d.push(i)-1,u[a]={}),n=u[a]&&u[a][r]?u[a][r]:u[a][r]=s()}else n=s();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function s(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),o=0;o<n.length;o++)e.setAttribute(n[o],t.attributes[n[o]]);var a="prepend"===r?"afterbegin":"beforeend";return i.insertAdjacentElement(a,e),e}}(".fl-main-container {\n  position: fixed;\n  max-width: 350px;\n  width: 100%;\n  z-index: 99999; }\n  .fl-main-container[data-position^=\"top-\"] {\n    top: 0.5rem; }\n  .fl-main-container[data-position^=\"bottom-\"] {\n    bottom: 0.5rem; }\n  .fl-main-container[data-position$=\"-right\"] {\n    right: 0.5rem; }\n    .fl-main-container[data-position$=\"-right\"] .fl-container {\n      transform: translateX(110%); }\n  .fl-main-container[data-position$=\"-left\"] {\n    left: 0.5rem; }\n    .fl-main-container[data-position$=\"-left\"] .fl-container {\n      transform: translateX(-110%); }\n  .fl-main-container[data-position$=\"-center\"] {\n    left: 50%;\n    transform: translateX(-50%); }\n  .fl-main-container[data-position=\"top-center\"] .fl-container {\n    transform: translateY(-100vh); }\n  .fl-main-container[data-position=\"bottom-center\"] .fl-container {\n    transform: translateY(100vh); }\n  .fl-main-container .fl-container {\n    transition: transform 0.3s ease-in-out;\n    overflow: hidden; }\n    .fl-main-container .fl-container.fl-show {\n      transform: translate(0, 0); }\n\n.fl-flasher.fl-container {\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n  line-height: 1.5;\n  margin-top: 0.5rem;\n  background-color: #ffffff;\n  border-radius: 0.375rem 0 0 0.375rem;\n  cursor: pointer;\n  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);\n  word-break: break-word; }\n  .fl-flasher.fl-container .fl-content {\n    display: flex;\n    padding-top: 0.75rem;\n    padding-bottom: 0.75rem;\n    padding-right: 0.75rem;\n    align-items: center; }\n  .fl-flasher.fl-container .fl-icon {\n    display: inline-block;\n    margin-left: 0.5rem;\n    margin-right: 0.5rem;\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n    font-size: 0.875rem;\n    line-height: 1.25rem;\n    flex-shrink: 0;\n    width: 2.5rem;\n    height: 2.5rem;\n    border-radius: 50%; }\n  .fl-flasher.fl-container .fl-title {\n    display: block;\n    margin-left: 0.5rem;\n    font-size: 1rem;\n    font-weight: 500;\n    line-height: 1.25rem;\n    text-transform: capitalize; }\n  .fl-flasher.fl-container .fl-message {\n    display: block;\n    margin-top: 0.25rem;\n    margin-left: 0.5rem;\n    color: #6B7280;\n    font-size: 0.875rem;\n    line-height: 1.25rem;\n    text-transform: capitalize; }\n  .fl-flasher.fl-container .fl-progress-bar {\n    display: flex;\n    height: 0.125rem; }\n\n.fl-flasher.fl-success {\n  border-left: 8px solid #059669FF; }\n  .fl-flasher.fl-success .fl-icon {\n    background-image: url(\"data:image/svg+xml;charset=utf8,%3Csvg width='20' height='20' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%23059669FF'%3E%3Cpath fill-rule='evenodd' d='M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z' clip-rule='evenodd' /%3E%3C/svg%3E\"); }\n  .fl-flasher.fl-success .fl-title {\n    color: #059669FF; }\n  .fl-flasher.fl-success .fl-progress-bar {\n    background-color: #6dface; }\n    .fl-flasher.fl-success .fl-progress-bar .fl-progress {\n      background-color: #059669FF; }\n\n.fl-flasher.fl-info {\n  border-left: 8px solid #2563EBFF; }\n  .fl-flasher.fl-info .fl-icon {\n    background-image: url(\"data:image/svg+xml;charset=utf8,%3Csvg width='20' height='20' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%232563EBFF'%3E%3Cpath fill-rule='evenodd' d='M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v3a1 1 0 102 0V6a1 1 0 00-1-1z' clip-rule='evenodd' /%3E%3C/svg%3E\"); }\n  .fl-flasher.fl-info .fl-title {\n    color: #2563EBFF; }\n  .fl-flasher.fl-info .fl-progress-bar {\n    background-color: #e0e9fc; }\n    .fl-flasher.fl-info .fl-progress-bar .fl-progress {\n      background-color: #2563EBFF; }\n\n.fl-flasher.fl-warning {\n  border-left: 8px solid #D97706FF; }\n  .fl-flasher.fl-warning .fl-icon {\n    background-image: url(\"data:image/svg+xml;charset=utf8,%3Csvg width='20' height='20' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%23D97706FF'%3E%3Cpath fill-rule='evenodd' d='M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 102 0V6a1 1 0 00-1-1z' clip-rule='evenodd' /%3E%3C/svg%3E\"); }\n  .fl-flasher.fl-warning .fl-title {\n    color: #D97706FF; }\n  .fl-flasher.fl-warning .fl-progress-bar {\n    background-color: #fdd8ae; }\n    .fl-flasher.fl-warning .fl-progress-bar .fl-progress {\n      background-color: #D97706FF; }\n\n.fl-flasher.fl-error {\n  border-left: 8px solid #DC2626FF; }\n  .fl-flasher.fl-error .fl-icon {\n    background-image: url(\"data:image/svg+xml;charset=utf8,%3Csvg width='20' height='20' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%23DC2626FF'%3E%3Cpath fill-rule='evenodd' d='M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z' clip-rule='evenodd' /%3E%3C/svg%3E\"); }\n  .fl-flasher.fl-error .fl-title {\n    color: #DC2626FF; }\n  .fl-flasher.fl-error .fl-progress-bar {\n    background-color: #f8d6d6; }\n    .fl-flasher.fl-error .fl-progress-bar .fl-progress {\n      background-color: #DC2626FF; }\n",{});var h=new p;return h.addTheme("flasher",{render:function(e){var t,n=e.notification;return'<div class="fl-flasher fl-container fl-'+n.type+'"><div class="fl-content"><div class="fl-icon"></div><div><strong class="fl-title">'+(null!==(t=n.title)&&void 0!==t?t:n.type)+'</strong><span class="fl-message">'+n.message+'</span></div></div><div class="fl-progress-bar"></div></div>'}}),h}));
